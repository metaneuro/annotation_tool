(window.webpackJsonp=window.webpackJsonp||[]).push([[16,11,12,13],{377:function(t,e,o){var content=o(387);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(67).default)("4698b18d",content,!0,{sourceMap:!1})},378:function(t,e,o){var content=o(389);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(67).default)("016425ea",content,!0,{sourceMap:!1})},386:function(t,e,o){"use strict";o(377)},387:function(t,e,o){var r=o(66)((function(i){return i[1]}));r.push([t.i,".category-transparent{opacity:.5}.category-opaque{opacity:1}",""]),r.locals={},t.exports=r},388:function(t,e,o){"use strict";o(378)},389:function(t,e,o){var r=o(66)((function(i){return i[1]}));r.push([t.i,".no-padding-right{padding-right:0}",""]),r.locals={},t.exports=r},397:function(t,e,o){"use strict";o.r(e);o(15);var r={props:{categories:{type:Array,required:!0},categoryClasses:{type:Object,required:!0},instructions:{type:String,required:!0},title:{type:String,required:!0}},data:function(){return{selectedCategory:this.categories[0]}},computed:{categoryTable:function(){return this.categories.map((function(t){return{category:t}}))}},methods:{selectCategory:function(t){0!==t.length&&(this.selectedCategory=t[0].category,this.$emit("category-select",{category:this.selectedCategory}))},styleTableRow:function(t,e){return[this.selectedCategory!==t.category?"category-transparent":"category-opaque",this.categoryClasses[t.category]]}}},n=(o(386),o(59)),component=Object(n.a)(r,(function(){var t=this,e=t._self._c;return e("b-container",{attrs:{fluid:""}},[e("b-row",[e("h3",[t._v(t._s(t.title))])]),t._v(" "),e("b-row",[e("p",{staticClass:"instructions-text"},[t._v("\n            "+t._s(t.instructions)+"\n        ")])]),t._v(" "),e("b-row",[e("b-table",{attrs:{outlined:"",selectable:"","head-variant":"dark",items:t.categoryTable,"select-mode":"single","selected-variant":"","tbody-tr-class":t.styleTableRow,"thead-class":"hidden"},on:{"row-selected":t.selectCategory}})],1)],1)}),[],!1,null,null,null);e.default=component.exports},398:function(t,e,o){"use strict";o.r(e);var r={props:{categoryClasses:{type:Object,required:!0},columnToCategoryMap:{type:Object,required:!0},fields:{type:Array,required:!0},selectedCategory:{type:String,required:!0},tableData:{type:Array,required:!0}},methods:{applyCategory:function(t,e,o){this.$emit("column-name-selected",{column:t.column})},styleTableRow:function(t,e){var o=this.columnToCategoryMap[t.column];return null===o?"":this.categoryClasses[o]}}},n=o(59),component=Object(n.a)(r,(function(){var t=this,e=t._self._c;return e("b-container",{attrs:{fluid:""}},[e("b-table",{attrs:{bordered:"",outlined:"",fields:t.fields,"head-variant":"dark",items:t.tableData,"tbody-tr-class":t.styleTableRow},on:{"row-clicked":t.applyCategory}})],1)}),[],!1,null,null,null);e.default=component.exports},399:function(t,e,o){"use strict";o.r(e);o(5),o(4),o(2),o(1),o(6),o(3),o(7),o(19),o(64),o(48),o(11),o(65),o(76),o(54);var r=o(0),n=(o(60),o(77),o(16),o(268),o(22),o(144),o(68));function l(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,l=!0,d=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return l=t.done,t},e:function(t){d=!0,n=t},f:function(){try{l||null==o.return||o.return()}finally{if(d)throw n}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:{columnNames:{type:Array,required:!0}},inject:["columnToCategoryMap","toolGroups"],data:function(){return{assessmentToolGroups:{items:[],fields:[{key:"name",label:"Group Name",type:"text",placeholder:"Enter Name..."},{key:"toolList",label:"Tools",type:"text"},{key:"action",label:" ",type:"text"}]},currentGroup:"",currentMode:"create",modes:{create:"create",modify:"modify"},newToolGroupName:"",selectedTools:[],uiText:{alreadyExistsText:"Group already exists in table",createToolGroupButton:"+ Create Tool Group",instructions:"Enter a name, choose columns, and then click the 'create' button",modifyToolGroupbutton:"~ Modify Tool Group",removeToolGroupButton:"x Remove Tool Group",title:"Assessment Tool Groups",toolGroupNamePlaceholder:"Type name of assessment tool group here..."}}},computed:m(m({},Object(n.b)(["getGroupOfTool","isToolGrouped"])),{},{hasNoGroups:function(){return 0===this.assessmentToolGroups.items.length},invalidNameEntered:function(){var t=this.newToolGroupName in this.toolGroups;return this.modes.modify===this.currentMode&&(t=t&&this.currentGroup!==this.newToolGroupName),t},readyToAddOrModifyToolGroup:function(){var t=""!==this.newToolGroupName&&this.selectedTools.length>0;if(!t)return!1;switch(this.currentMode){case this.modes.create:t=t&&!Object.hasOwn(this.toolGroups,this.newToolGroupName);break;case this.modes.modify:for(var e in this.toolGroups)if(e===this.newToolGroupName&&e!==this.currentGroup){t=!1;break}}return t}}),watch:{columnToCategoryMap:{deep:!0,handler:function(t,e){var o,r=[],n=l(this.assessmentToolGroups.items);try{for(n.s();!(o=n.n()).done;){var c,d=l(o.value.toolList.split(", "));try{for(d.s();!(c=d.n()).done;){var m=c.value;null===this.columnToCategoryMap[m]&&r.push(m)}}catch(t){d.e(t)}finally{d.f()}}}catch(t){n.e(t)}finally{n.f()}for(var f in this.toolGroups){var h,y=l(r);try{for(y.s();!(h=y.n()).done;){var T=h.value;this.toolGroups[f].includes(T)&&this.$emit("remove-tool-from-group",{tool:T,group:f})}}catch(t){y.e(t)}finally{y.f()}}for(var v in this.toolGroups)0===this.toolGroups[v].length&&this.removeToolGroup({item:{name:v}});this.refreshToolGroupTable()}}},mounted:function(){this.refreshToolGroupTable()},methods:{columnOptions:function(){var t=[];for(var e in this.columnToCategoryMap)if("Assessment Tool"==this.columnToCategoryMap[e]){var o=!0;(this.modes.modify===this.currentMode&&this.currentGroup===this.getGroupOfTool(e)||!this.isToolGrouped(e))&&(o=!1),t.push({disabled:o,text:e,value:e})}return t},currentModeText:function(){return this.modes.create===this.currentMode?this.uiText.createToolGroupButton:this.uiText.modifyToolGroupbutton},createToolGroup:function(){this.assessmentToolGroups.items.push({name:this.newToolGroupName,toolList:this.selectedTools.join(", ")}),this.$emit("tool-group-action",{action:"createToolGroup",data:{name:this.newToolGroupName,tools:this.selectedTools}}),this.switchMode(this.modes.create,{})},modifyToolGroup:function(){var t=this,e=this.assessmentToolGroups.items.findIndex((function(e){return t.currentGroup===e.name}));this.$set(this.assessmentToolGroups.items[e],"name",this.newToolGroupName),this.$set(this.assessmentToolGroups.items[e],"toolList",this.selectedTools.join(", ")),this.$emit("tool-group-action",{action:"modifyToolGroup",data:{name:this.newToolGroupName,previousName:this.currentGroup,tools:this.selectedTools}}),this.switchMode(this.modes.create,{}),this.$refs.table.clearSelected()},refreshToolGroupTable:function(){for(var t in this.assessmentToolGroups.items=[],this.toolGroups)this.assessmentToolGroups.items.push({name:t,toolList:this.toolGroups[t].join(", ")})},removeToolGroup:function(t){var e=this.assessmentToolGroups.items.findIndex((function(e){return e.name===t.item.name}));this.assessmentToolGroups.items.splice(e,1),this.$emit("tool-group-action",{action:"removeToolGroup",data:{name:t.item.name}})},switchMode:function(t,e){this.modes.create===t?(this.newToolGroupName="",this.selectedTools=[],this.currentMode=this.modes.create,this.currentGroup=""):this.modes.modify===t&&(this.currentMode=this.modes.modify,this.currentGroup=e.name,this.newToolGroupName=e.name)},selectTableRow:function(t){0===t.length?this.switchMode(this.modes.create,{}):this.switchMode(this.modes.modify,t[0])}}},h=(o(388),o(59)),component=Object(h.a)(f,(function(){var t=this,e=t._self._c;return e("b-row",{staticStyle:{"margin-bottom":"0"}},[e("b-col",{attrs:{cols:"6"}},[e("b-row",[e("h3",[t._v(t._s(t.uiText.title))])]),t._v(" "),e("b-row",[e("p",{staticClass:"instructions-text"},[t._v("\n                "+t._s(t.uiText.instructions)+"\n            ")])]),t._v(" "),e("b-row",[e("b-input-group",[e("label",{attrs:{for:"tool-name-textbox"}},[t._v("Group name: ")]),t._v(" "),e("b-form-input",{attrs:{"data-cy":"toolgroup-name-textbox",id:"tool-name-textbox",placeholder:t.uiText.toolGroupNamePlaceholder},model:{value:t.newToolGroupName,callback:function(e){t.newToolGroupName=e},expression:"newToolGroupName"}})],1)],1),t._v(" "),e("b-row",[e("b-input-group",[e("label",{attrs:{for:"column-multiselect"}},[t._v("Columns: ")]),t._v(" "),e("b-form-select",{attrs:{"data-cy":"toolgroup-column-multiselect",id:"column-multiselect",multiple:"",options:t.columnOptions(),"select-size":4},model:{value:t.selectedTools,callback:function(e){t.selectedTools=e},expression:"selectedTools"}})],1)],1),t._v(" "),e("b-row",[e("b-col",{attrs:{cols:"4"}},[t.invalidNameEntered?e("p",{staticClass:"instructions-text"},[t._v("\n                    "+t._s(t.uiText.alreadyExistsText)+"\n                ")]):t._e()]),t._v(" "),e("b-col",{staticClass:"no-padding-right",attrs:{ols:"8"}},[e("b-button",{staticClass:"float-right",attrs:{"data-cy":"create-toolgroup-button",disabled:!t.readyToAddOrModifyToolGroup,variant:"info"},on:{click:function(e){t.modes.create===t.currentMode?t.createToolGroup():t.modifyToolGroup()}}},[t._v("\n                    "+t._s(t.currentModeText())+"\n                ")])],1)],1)],1),t._v(" "),e("b-col",{attrs:{cols:"6"}},[e("b-row",[e("b-table",{ref:"table",attrs:{"data-cy":"toolgroup-table",bordered:"",selectable:"","head-variant":"dark","select-mode":"single",items:t.assessmentToolGroups.items,fields:t.assessmentToolGroups.fields},on:{"row-selected":function(e){return t.selectTableRow(e)}},scopedSlots:t._u([t.hasNoGroups?{key:"top-row",fn:function(){return t._l(t.assessmentToolGroups.fields,(function(o){return e("td",{key:o.key},[t._v("\n                             \n                    ")])}))},proxy:!0}:null,{key:"cell(action)",fn:function(o){return[e("b-button",{staticClass:"float-right",attrs:{variant:"danger"},on:{click:function(e){return t.removeToolGroup(o)}}},[t._v("\n                        "+t._s(t.uiText.removeToolGroupButton)+"\n                    ")])]}}],null,!0)})],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},431:function(t,e,o){"use strict";o.r(e);o(5),o(2),o(1),o(6),o(3),o(7),o(19),o(22),o(64),o(48),o(11),o(76),o(54);var r=o(0),n=(o(144),o(60),o(4),o(65),o(68));function l(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,l=!0,d=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return l=t.done,t},e:function(t){d=!0,n=t},f:function(){try{l||null==o.return||o.return()}finally{if(d)throw n}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"CategorizationPage",data:function(){return{columnLinkingTable:{fields:[{key:"column"},{key:"description"}]},columnToCategoryTable:[],selectedCategory:"",uiText:{categorySelectInstructions:"Click category and then corresponding column from tsv file",categorySelectTitle:"Recommended Categories",nextButton:"Next step: Annotate columns",nextPageCriteria:"One column must be categorized as 'Subject ID' and all assessment tools must be grouped to proceed"}}},computed:m(m({},Object(n.c)(["categories","categoryClasses","columnToCategoryMap","dataTable","dataDictionary","pageData","toolGroups"])),{},{nextPageButtonColor:function(){return this.pageData.annotation.accessible?"success":"secondary"}}),provide:function(){return{columnToCategoryMap:this.columnToCategoryMap,toolGroups:this.toolGroups}},mounted:function(){this.$store.dispatch("setCurrentPage","categorization"),this.setupColumnToCategoryTable(),this.setSelectedCategory({category:this.categories[0]}),this.$store.dispatch("initializePage",{pageName:"annotation",enable:this.nextPageAccessible()})},methods:{countLinkedColumns:function(){var t=0;for(var e in this.columnToCategoryMap)null!==this.columnToCategoryMap[e]&&(t+=1);return t},nextPageAccessible:function(){var t=this.countLinkedColumns()>0,e=[];for(var o in this.columnToCategoryMap)"Assessment Tool"===this.columnToCategoryMap[o]&&e.push(o);for(var r in this.toolGroups){var n,c=l(this.toolGroups[r]);try{for(c.s();!(n=c.n()).done;){var d=n.value,m=e.indexOf(d);e.splice(m,1)}}catch(t){c.e(t)}finally{c.f()}}var f=0===e.length,h=0;for(var y in this.columnToCategoryMap)"Subject ID"===this.columnToCategoryMap[y]&&(h+=1);return t&&f&&1===h},removeToolFromGroup:function(t){this.$store.dispatch("removeToolFromGroup",t)},removeToolGroup:function(t){this.$store.dispatch("removeToolGroup",t),this.$store.dispatch("initializePage",{pageName:"annotation",enable:this.nextPageAccessible()})},saveNewToolGroup:function(t){this.$store.dispatch("createToolGroup",t),this.$store.dispatch("initializePage",{pageName:"annotation",enable:this.nextPageAccessible()})},setSelectedCategory:function(t){this.selectedCategory=t.category},setupColumnToCategoryTable:function(){if(null!==this.dataTable.original){this.columnToCategoryTable=[];var t=[];for(var e in this.dataTable.original[0])t.push(e),this.columnToCategoryTable.push({category:null,column:e,description:""});if(null!==this.dataDictionary.original)for(var o in this.dataDictionary.original){var r=o.toLowerCase();if(t.includes(r))for(var n=0;n<this.columnToCategoryTable.length;n++)if(r===this.columnToCategoryTable[n].column.toLowerCase()){var l="";for(var c in this.dataDictionary.original[o])if("description"===c.toLowerCase()){l=this.dataDictionary.original[o][c];break}this.columnToCategoryTable[n].description=l}}}},tableClick:function(t){var e=this.selectedCategory!==this.columnToCategoryMap[t.column],o=e?"linkColumnWithCategory":"unlinkColumnFromCategory",r={column:t.column};e&&(r.category=this.selectedCategory),this.$store.dispatch(o,r),this.$store.dispatch("initializePage",{pageName:"annotation",enable:this.nextPageAccessible()})},toolGroupAction:function(t){this.$store.dispatch(t.action,t.data),this.$store.dispatch("initializePage",{pageName:"annotation",enable:this.nextPageAccessible()})}}},h=o(59),component=Object(h.a)(f,(function(){var t=this,e=t._self._c;return e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",{attrs:{cols:"4"}},[e("category-select-table",{attrs:{"data-cy":"categorization-table",categories:t.categories,"category-classes":t.categoryClasses,instructions:t.uiText.categorySelectInstructions,title:t.uiText.categorySelectTitle},on:{"category-select":function(e){return t.setSelectedCategory(e)}}})],1),t._v(" "),e("b-col",{attrs:{cols:"8"}},[e("column-linking-table",{attrs:{"data-cy":"column-linking-table","category-classes":t.categoryClasses,"column-to-category-map":t.columnToCategoryMap,fields:t.columnLinkingTable.fields,"selected-category":t.selectedCategory,"table-data":t.columnToCategoryTable},on:{"column-name-selected":function(e){return t.tableClick(e)}}})],1)],1),t._v(" "),e("b-row",[t._v(" ")]),t._v(" "),e("categ-tool-group",{attrs:{"column-names":t.dataTable.columns},on:{"remove-tool-from-group":function(e){return t.removeToolFromGroup(e)},"tool-group-action":function(e){return t.toolGroupAction(e)}}}),t._v(" "),e("b-row",[e("b-col",{staticClass:"text-right",attrs:{cols:"12"}},[t.pageData.annotation.accessible?t._e():e("p",{staticClass:"instructions-text"},[t._v("\n                "+t._s(t.uiText.nextPageCriteria)+"\n            ")]),t._v(" "),e("b-button",{staticClass:"float-right",attrs:{"data-cy":"button-nextpage",disabled:!t.pageData.annotation.accessible,to:"/"+t.pageData.annotation.location,variant:t.nextPageButtonColor}},[t._v("\n                "+t._s(t.uiText.nextButton)+"\n            ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CategorySelectTable:o(397).default,ColumnLinkingTable:o(398).default,CategToolGroup:o(399).default})}}]);