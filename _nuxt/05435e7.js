(window.webpackJsonp=window.webpackJsonp||[]).push([[3,5],{379:function(t,e,n){var r=n(10),o=n(266).values;r({target:"Object",stat:!0},{values:function(t){return o(t)}})},393:function(t,e,n){var content=n(428);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(67).default)("c39a7d00",content,!0,{sourceMap:!1})},401:function(t,e,n){"use strict";n.r(e);var r={props:{items:{type:Array,default:function(){return[]}}},name:"ContinuousTable",data:function(){return{column:"cell(raw)"}}},o=n(59),component=Object(o.a)(r,(function(){return(0,this._self._c)("b-table",{attrs:{hover:"",striped:"",id:"annotation-table",items:this.items}})}),[],!1,null,null,null);e.default=component.exports},427:function(t,e,n){"use strict";n(393)},428:function(t,e,n){var r=n(66)((function(i){return i[1]}));r.push([t.i,".age-values-card-body[data-v-2f2ad966]{height:300px;overflow-y:scroll;position:relative}",""]),r.locals={},t.exports=r},434:function(t,e,n){"use strict";n.r(e);var r=n(34);n(78),n(11),n(37),n(16),n(264),n(5),n(1),n(263),n(60),n(77),n(21),n(15),n(35),n(2),n(267),n(265),n(379),n(19),n(22),n(64),n(48),n(4),n(65),n(76),n(54);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){f=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(f)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var c={props:{relevantColumns:{type:Array,required:!0},title:{type:String,required:!0},uniqueValues:{type:Object,required:!0}},inject:["dataTable","missingValueLabel"],name:"SubNumericValidation",data:function(){return{saveButtonDisabled:!1,regularExpressions:["(?<float>\\d+\\.\\d+)","(?<bounded>\\d+\\+)","(?<euro>\\d+,\\d+)","(?<range>\\d+-\\d+)","(?<int>^\\d+$)","(?<string>^\\D+$)","(?<isoyear>\\d+Y)?(?<isomonth>\\d+M)?"],uiText:{instructions:"Review the age harmonization",saveButton:"Save Annotation"},unique_range:{start:0,end:3}}},computed:{ageRegex:function(){return new RegExp(this.regularExpressions.join("|"))},columnTransformHeuristics:function(){var t,e={},n=o(this.relevantColumns);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r]=this.detectColumnAgeFormat(r)}}catch(t){n.e(t)}finally{n.f()}return e},saveButtonColor:function(){return this.saveButtonDisabled?"secondary":"success"},uniqueTableData:function(){var t,e=[],n=o(this.relevantColumns);try{for(n.s();!(t=n.n()).done;)for(var r=t.value,l=this.unique_range.start;l<this.unique_range.end;l++){var c=this.columnTransformHeuristics[r],f=this.uniqueValues[r][l];e.push({column_name:r,heuristic:c,raw_value:f,transformed_value:this.convertAge(f,c)})}}catch(t){n.e(t)}finally{n.f()}return e}},methods:{applyAnnotation:function(){for(var t=structuredClone(this.dataTable.annotated),e=0;e<t.length;e++)for(var n in t[e])this.relevantColumns.includes(n)&&(t[e][n]=this.transformedValue(n,t[e][n]));this.$emit("update:dataTable",{transformedTable:t})},convertAge:function(t,e){var n="";switch(e){case"float":n=parseFloat(t);break;case"bounded":n=parseInt(t.replace("+",""));break;case"euro":n=parseFloat(t.replace(",","."));break;case"range":var o=t.split("-").map((function(t){return parseFloat(t.trim())})),l=Object(r.a)(o,2);n=(l[0]+l[1])/2;break;case"int":n=parseInt(t);break;case"string":n=this.missingValueLabel;break;case"isoyear":var c=this.detectAgeFormat(t),f=parseInt(c.isoyear.replace("Y","")),d=Object.keys(c).includes("isomonth")?parseInt(c.isomonth.replace("M",""))/12:0;n="".concat(f+d)}return n},detectAgeFormat:function(t){var e=this.ageRegex.exec(t);if(null!==e){var n=Object.keys(e.groups).filter((function(t){return void 0!==e.groups[t]}));return Object.fromEntries(n.map((function(t){return[t,e.groups[t]]})))}},detectColumnAgeFormat:function(t){var e,n={},r=o(this.uniqueValues[t]);try{for(r.s();!(e=r.n()).done;){var l=e.value,c=Object.keys(this.detectAgeFormat(l))[0];c in n?n[c]+=1:n[c]=1}}catch(t){r.e(t)}finally{r.f()}return this.getMostCommonFormat(n)},getMostCommonFormat:function(t){if(Object.keys(t).includes("string")&&1===Object.keys(t).length)return"string";var e=Object.fromEntries(Object.entries(t).filter((function(t){var e=Object(r.a)(t,2),n=e[0];e[1];return"string"!==n}))),n=Object.values(e),o=n.indexOf(Math.max.apply(Math,n));return Object.keys(e)[o]},transformedValue:function(t,e){return this.convertAge(e,this.columnTransformHeuristics[t])}}},f=(n(427),n(59)),component=Object(f.a)(c,(function(){var t=this,e=t._self._c;return e("div",[e("b-card",{staticClass:"annotation-card",attrs:{"no-body":""}},[e("b-card-header",[t._v(t._s(t.uiText.instructions))]),t._v(" "),e("b-card-body",{staticClass:"age-values-card-body"},[e("annot-continuous-values",{attrs:{items:t.uniqueTableData}})],1)],1),t._v(" "),e("b-row",[e("b-button",{attrs:{"data-cy":"save-button-"+t.title,disabled:t.saveButtonDisabled,variant:t.saveButtonColor},on:{click:t.applyAnnotation}},[t._v("\n            "+t._s(t.uiText.saveButton)+"\n        ")])],1)],1)}),[],!1,null,"2f2ad966",null);e.default=component.exports;installComponents(component,{AnnotContinuousValues:n(401).default})}}]);